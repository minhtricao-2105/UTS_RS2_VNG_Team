<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: ur3module.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ur3module.py File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file provides some functions for finding trajectory and solution for controlling the robot.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a906807cb386002ede6b617207df31304"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ur3module_8py.html#a906807cb386002ede6b617207df31304">ur3module.get_link_transform</a> (robot, q)</td></tr>
<tr class="separator:a906807cb386002ede6b617207df31304"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94ebd800ae6360fef3d93b3f797b5578"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ur3module_8py.html#a94ebd800ae6360fef3d93b3f797b5578">ur3module.is_touch_ground</a> (robot, q)</td></tr>
<tr class="separator:a94ebd800ae6360fef3d93b3f797b5578"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f677900d3d03562ad9c4690dd4a0022"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ur3module_8py.html#a2f677900d3d03562ad9c4690dd4a0022">ur3module.is_collision_obstacle</a> (robot, q, obstacle_list, is_swift=True)</td></tr>
<tr class="separator:a2f677900d3d03562ad9c4690dd4a0022"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6f317160269ca2f4a16368ee0534f1f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ur3module_8py.html#aa6f317160269ca2f4a16368ee0534f1f">ur3module.is_self_collision_UR3</a> (q)</td></tr>
<tr class="separator:aa6f317160269ca2f4a16368ee0534f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfdf9f2077c60141c6236655be4c99f5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ur3module_8py.html#abfdf9f2077c60141c6236655be4c99f5">ur3module.is_elbow_up</a> (robot, q)</td></tr>
<tr class="separator:abfdf9f2077c60141c6236655be4c99f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2268b4e63e3441424951a80353bb769"><td class="memItemLeft" align="right" valign="top"><a id="ad2268b4e63e3441424951a80353bb769"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>ur3module.is_joint_valid</b> (robot, q, obstacle_list=None)</td></tr>
<tr class="separator:ad2268b4e63e3441424951a80353bb769"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaaafaea827b8b824f13aefd4c57e2b4e"><td class="memItemLeft" align="right" valign="top">np.array&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ur3module_8py.html#aaaafaea827b8b824f13aefd4c57e2b4e">ur3module.solve_for_valid_ik</a> (robot, obj_pose, relative_pose=SE3(0, 0, 0), elbow_up_request=False)</td></tr>
<tr class="separator:aaaafaea827b8b824f13aefd4c57e2b4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96282b1523da6f555d0d6a37e38271c2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ur3module_8py.html#a96282b1523da6f555d0d6a37e38271c2">ur3module.move_robot_with_object</a> (robot, path, env, obj=None, relative_pose=None, show_path=True)</td></tr>
<tr class="separator:a96282b1523da6f555d0d6a37e38271c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4bee5405fb50dad9f360d931fba14c8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ur3module_8py.html#ab4bee5405fb50dad9f360d931fba14c8">ur3module.move_robot_insurance</a> (robot, q_end, env, obstacle_list=None, show_path=True)</td></tr>
<tr class="separator:ab4bee5405fb50dad9f360d931fba14c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a683cb263421ca9f18783c01ce83261c1"><td class="memItemLeft" align="right" valign="top"><a id="a683cb263421ca9f18783c01ce83261c1"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>ur3module.get_valid_path</b> (robot, path, obstacle_list=None)</td></tr>
<tr class="separator:a683cb263421ca9f18783c01ce83261c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91d6e60878363f0351d249ba0ca4630c"><td class="memItemLeft" align="right" valign="top"><a id="a91d6e60878363f0351d249ba0ca4630c"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><b>ur3module.show_path</b> (robot, path, env)</td></tr>
<tr class="separator:a91d6e60878363f0351d249ba0ca4630c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5b9e33be5cae3171557676305b646a91"><td class="memItemLeft" align="right" valign="top"><a id="a5b9e33be5cae3171557676305b646a91"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ur3module.robo_clone</b> = rtb.models.UR3()</td></tr>
<tr class="separator:a5b9e33be5cae3171557676305b646a91"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file provides some functions for finding trajectory and solution for controlling the robot. </p>
<dl class="section author"><dt>Author</dt><dd>Ho Minh Quang Ngo</dd></dl>
<dl class="section date"><dt>Date</dt><dd>last updated on May 9, 2023 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a906807cb386002ede6b617207df31304"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a906807cb386002ede6b617207df31304">&#9670;&nbsp;</a></span>get_link_transform()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ur3module.get_link_transform </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>robot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Get transform for each link of the robot

:param robot: Manipulator 
:type robot: URDF model
:param q: joint state 
:type q: array like
:return: list of transform for each link at the given joint state
:rtype: list of SE3 transforms

Computes SE3 object for each link of the input robot 
</pre> 
</div>
</div>
<a id="a2f677900d3d03562ad9c4690dd4a0022"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f677900d3d03562ad9c4690dd4a0022">&#9670;&nbsp;</a></span>is_collision_obstacle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ur3module.is_collision_obstacle </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>robot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>q</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>obstacle_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>is_swift</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check whether any self collision happens in an UR3 robot. 

:param robot: Manipulator 
:type robot: URDF model
:param q: joint state 
:type q: array like
:param obstacle_list: list of obstacles 
:type obstacle_list: list of objects of Shape class
:param is_swift: whether the Swift environment is used, default is True
:type is_swift: bool
:return: whether any self-collision happens for a UR3 robot at the given joint state 
:rtype: bool value</pre> 
</div>
</div>
<a id="abfdf9f2077c60141c6236655be4c99f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfdf9f2077c60141c6236655be4c99f5">&#9670;&nbsp;</a></span>is_elbow_up()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ur3module.is_elbow_up </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>robot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check whether the configuration q of the robot is elbow up

:param robot: UR3 manipulator 
:type robot: URDF model
:param q: current joint state of the robot 
:type q: array like
:return: whether the configuration q of the robot is elbow up
:rtype: boolean</pre> 
</div>
</div>
<a id="aa6f317160269ca2f4a16368ee0534f1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6f317160269ca2f4a16368ee0534f1f">&#9670;&nbsp;</a></span>is_self_collision_UR3()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ur3module.is_self_collision_UR3 </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>q</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check whether any self collision happens in an UR3 robot.
Cannot be used when being imported separately without the robo_clone global variable

:param q: joint state 
:type q: array like
:return: whether any self-collision happens for a UR3 robot at the given joint state 
:rtype: bool value</pre> 
</div>
</div>
<a id="a94ebd800ae6360fef3d93b3f797b5578"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94ebd800ae6360fef3d93b3f797b5578">&#9670;&nbsp;</a></span>is_touch_ground()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ur3module.is_touch_ground </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>robot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>q</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Check whether any link of the input robot lower than the given certain height from the base,
at the given joint state. Cannot be used without importing 'get_link_transform'

:param robot: Manipulator 
:type robot: URDF model
:param q: joint state 
:type q: array like
:return: whether the ground touch happens for any link in robot at the given joint state
:rtype: bool value</pre> 
</div>
</div>
<a id="ab4bee5405fb50dad9f360d931fba14c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4bee5405fb50dad9f360d931fba14c8">&#9670;&nbsp;</a></span>move_robot_insurance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ur3module.move_robot_insurance </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>robot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>q_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>obstacle_list</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>show_path</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Create a trapezoidal joint-state path from the current position to the input position and then move the UR3 robot. 
Check self-collision &amp; obstacle (including ground) and stop the robot when collision will happen. 
Cannot be use without importing 'is_self_collision_UR3' and 'is_touch_ground'

:param robot: UR3 manipulator 
:type robot: URDF model
:param q_end: final joint state of the robot
:type q_end: 1x6 array like
:param env: environment
:type env: environment object
:param obstacle_list: list of obstacles inside the environment
:type obstacle_list: list of obstacles of Shape Class
:param show_path: show the path of the end-effector, true by default
:type show_path: boolean</pre> 
</div>
</div>
<a id="a96282b1523da6f555d0d6a37e38271c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96282b1523da6f555d0d6a37e38271c2">&#9670;&nbsp;</a></span>move_robot_with_object()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def ur3module.move_robot_with_object </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>robot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>env</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>obj</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>relative_pose</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>show_path</em> = <code>True</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Move the robot along the given path. Unsure about self-collision &amp; obstacle (including ground) avoidance 

:param robot: Manipulator 
:type robot: URDF model
:param path: path that the robot should follow along
:type path: mxn list of ndarray with n-axis robot and m steps
:param env: environment
:type env: environment object
:param obj: object that move along with the robot's end-effector
:type obj: Shape class
:param relative_pose: transform from robot end-effector to object's pose
:type relative_pose: SE3 object
:param show_path: show the path of the end-effector, true by default
:type show_path: boolean</pre> 
</div>
</div>
<a id="aaaafaea827b8b824f13aefd4c57e2b4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaaafaea827b8b824f13aefd4c57e2b4e">&#9670;&nbsp;</a></span>solve_for_valid_ik()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"> np.array ur3module.solve_for_valid_ik </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>robot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>obj_pose</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>relative_pose</em> = <code>SE3(0,0,0)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>elbow_up_request</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Solve for the valid inversed kinematics solution of the UR3 robot at the given goal pose.
A valid solution will not lead to self-collision and the ground touch. 
Cannot be use without importing 'is_self_collision_UR3' and 'is_touch_ground'

:param robot: UR3 manipulator 
:type robot: URDF model
:param obj_pose: object pose that require the end-effector to reach 
:type obj_pose: SE3 object
:param relative_pose: relative pose from the end-effector to the object pose 
:type relative_pose: SE3 object
:param relative_pose: relative pose from the end-effector to the object pose 
:type relative_pose: SE3 object
:param elbow_up_request: if the solution require an elbow up configuration, false by default 
:type elbow_up_request: boolean
:return: a valid solution IK solution using Levenberg-Marquadt optimization 
:rtype: list of joint state</pre> 
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
