<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: computer_vision.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">computer_vision.py File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This script is used for computer vision.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a00931f67cb5bcd1dfb49a1cfeb1dddfb"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="computer__vision_8py.html#a00931f67cb5bcd1dfb49a1cfeb1dddfb">computer_vision.depth_callback</a> (data)</td></tr>
<tr class="memdesc:a00931f67cb5bcd1dfb49a1cfeb1dddfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function for processing depth image messages.  <a href="computer__vision_8py.html#a00931f67cb5bcd1dfb49a1cfeb1dddfb">More...</a><br /></td></tr>
<tr class="separator:a00931f67cb5bcd1dfb49a1cfeb1dddfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a746ddb43e02e9f3bc5cc472d3505861f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="computer__vision_8py.html#a746ddb43e02e9f3bc5cc472d3505861f">computer_vision.batteries_callback</a> (data)</td></tr>
<tr class="memdesc:a746ddb43e02e9f3bc5cc472d3505861f"><td class="mdescLeft">&#160;</td><td class="mdescRight">@Brief Callback function for processing battery images This function is a callback for processing battery images received from a ROS node.  <a href="computer__vision_8py.html#a746ddb43e02e9f3bc5cc472d3505861f">More...</a><br /></td></tr>
<tr class="separator:a746ddb43e02e9f3bc5cc472d3505861f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4631601c56fdd784edacba6cf24a498"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="computer__vision_8py.html#af4631601c56fdd784edacba6cf24a498">computer_vision.canny_edge</a> (img)</td></tr>
<tr class="memdesc:af4631601c56fdd784edacba6cf24a498"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply Canny edge detection on an image This function takes an input image and applies Canny edge detection to find edges within the image.  <a href="computer__vision_8py.html#af4631601c56fdd784edacba6cf24a498">More...</a><br /></td></tr>
<tr class="separator:af4631601c56fdd784edacba6cf24a498"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d29d203d323e912819ad03f59cd026"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="computer__vision_8py.html#ac9d29d203d323e912819ad03f59cd026">computer_vision.crop</a> (img, factor)</td></tr>
<tr class="memdesc:ac9d29d203d323e912819ad03f59cd026"><td class="mdescLeft">&#160;</td><td class="mdescRight">Crop an image to a rectangle in the center of the image.  <a href="computer__vision_8py.html#ac9d29d203d323e912819ad03f59cd026">More...</a><br /></td></tr>
<tr class="separator:ac9d29d203d323e912819ad03f59cd026"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41d2d06bb09b8e620cd49e14257db867"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="computer__vision_8py.html#a41d2d06bb09b8e620cd49e14257db867">computer_vision.compare_two_image</a> ()</td></tr>
<tr class="memdesc:a41d2d06bb09b8e620cd49e14257db867"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare two images using Canny edge detection and contour analysis.  <a href="computer__vision_8py.html#a41d2d06bb09b8e620cd49e14257db867">More...</a><br /></td></tr>
<tr class="separator:a41d2d06bb09b8e620cd49e14257db867"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abacf921499324602d16790d890bb3370"><td class="memItemLeft" align="right" valign="top"><a id="abacf921499324602d16790d890bb3370"></a>
def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="computer__vision_8py.html#abacf921499324602d16790d890bb3370">computer_vision.perform_computervision</a> ()</td></tr>
<tr class="memdesc:abacf921499324602d16790d890bb3370"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform computer vision to detect the position of objects in an image. <br /></td></tr>
<tr class="separator:abacf921499324602d16790d890bb3370"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29096813d15fce2650170ccb9680fe65"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="computer__vision_8py.html#a29096813d15fce2650170ccb9680fe65">computer_vision.colour_detection</a> ()</td></tr>
<tr class="memdesc:a29096813d15fce2650170ccb9680fe65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Detects the color of battery containers in an image using OpenCV.  <a href="computer__vision_8py.html#a29096813d15fce2650170ccb9680fe65">More...</a><br /></td></tr>
<tr class="separator:a29096813d15fce2650170ccb9680fe65"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a28c09575c749bbd057a17abf5e99cd98"><td class="memItemLeft" align="right" valign="top"><a id="a28c09575c749bbd057a17abf5e99cd98"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>computer_vision.bridge</b> = CvBridge()</td></tr>
<tr class="separator:a28c09575c749bbd057a17abf5e99cd98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a147f4c6446b4611ed9e6df22eb42753e"><td class="memItemLeft" align="right" valign="top"><a id="a147f4c6446b4611ed9e6df22eb42753e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>computer_vision.bridge_1</b> = CvBridge()</td></tr>
<tr class="separator:a147f4c6446b4611ed9e6df22eb42753e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c7607b2ca2f01f19eca050c4303732b"><td class="memItemLeft" align="right" valign="top"><a id="a0c7607b2ca2f01f19eca050c4303732b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>computer_vision.image</b> = None</td></tr>
<tr class="separator:a0c7607b2ca2f01f19eca050c4303732b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af09cf565f8da4b4c093900faf7dabf50"><td class="memItemLeft" align="right" valign="top"><a id="af09cf565f8da4b4c093900faf7dabf50"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>computer_vision.image_1</b> = None</td></tr>
<tr class="separator:af09cf565f8da4b4c093900faf7dabf50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28a52d28c5030844b082ed2dcbcaa029"><td class="memItemLeft" align="right" valign="top"><a id="a28a52d28c5030844b082ed2dcbcaa029"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>computer_vision.flag</b> = 1</td></tr>
<tr class="separator:a28a52d28c5030844b082ed2dcbcaa029"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbc7afe49764a9a286fc360db398ea6a"><td class="memItemLeft" align="right" valign="top"><a id="acbc7afe49764a9a286fc360db398ea6a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>computer_vision.sub_1</b> = rospy.Publisher('Computer_Vision', String, queue_size = 20)</td></tr>
<tr class="separator:acbc7afe49764a9a286fc360db398ea6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0e23affe5a6e28be4db531a8d9bb3a9"><td class="memItemLeft" align="right" valign="top"><a id="ae0e23affe5a6e28be4db531a8d9bb3a9"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>computer_vision.publisher_2</b> = rospy.Publisher('Image_Data',Float32MultiArray, queue_size = 20)</td></tr>
<tr class="separator:ae0e23affe5a6e28be4db531a8d9bb3a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae68850c320a38df405e9bfbfac4e3a56"><td class="memItemLeft" align="right" valign="top"><a id="ae68850c320a38df405e9bfbfac4e3a56"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>computer_vision.publisher_3</b> = rospy.Publisher('Color_data', Float32MultiArray, queue_size = 20)</td></tr>
<tr class="separator:ae68850c320a38df405e9bfbfac4e3a56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08c6f5199e5294d6145fe889465fa126"><td class="memItemLeft" align="right" valign="top"><a id="a08c6f5199e5294d6145fe889465fa126"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>computer_vision.sub_2</b> = rospy.Subscriber(&quot;/camera/color/image_raw&quot;, Image, batteries_callback)</td></tr>
<tr class="separator:a08c6f5199e5294d6145fe889465fa126"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This script is used for computer vision. </p>
<p>It imports various libraries and functions necessary for computer vision, such as rospy, cv2, numpy, etc.</p>
<p>It defines the following functions:</p>
<ul>
<li>depth_callback: Callback function for the first image</li>
<li>batteries_callback: Callback function for the batteries image</li>
<li>canny_edge: Perform Canny edge detection</li>
<li>crop: Crop an image to a rectangle in the center of the image</li>
<li>compare_two_image: Compare two images and find the differences</li>
</ul>
<dl class="section see"><dt>See also</dt><dd>function.py </dd>
<dd>
<a class="el" href="colorLibrary_8py.html" title="This file provides functions for detecting different colors in an image.">colorLibrary.py</a> </dd>
<dd>
sensor_msgs/Image </dd>
<dd>
std_msgs/String </dd>
<dd>
std_msgs/Float32MultiArray</dd></dl>
<dl class="section author"><dt>Author</dt><dd>Minh Tri Cao </dd></dl>
<dl class="section date"><dt>Date</dt><dd>May 9, 2023 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a746ddb43e02e9f3bc5cc472d3505861f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a746ddb43e02e9f3bc5cc472d3505861f">&#9670;&nbsp;</a></span>batteries_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def computer_vision.batteries_callback </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>@Brief Callback function for processing battery images This function is a callback for processing battery images received from a ROS node. </p>
<p>It converts the ROS image message to an OpenCV image, detects the container to store the batteries, and then detects the location and type of the batteries using computer vision techniques. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The image data received from the ROS node </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

</div>
</div>
<a id="af4631601c56fdd784edacba6cf24a498"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4631601c56fdd784edacba6cf24a498">&#9670;&nbsp;</a></span>canny_edge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def computer_vision.canny_edge </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>img</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply Canny edge detection on an image This function takes an input image and applies Canny edge detection to find edges within the image. </p>
<p>The function returns the resulting image with the edges highlighted. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">img</td><td>The input image to apply Canny edge detection on </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The resulting image with edges highlighted </dd></dl>

</div>
</div>
<a id="a29096813d15fce2650170ccb9680fe65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29096813d15fce2650170ccb9680fe65">&#9670;&nbsp;</a></span>colour_detection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def computer_vision.colour_detection </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Detects the color of battery containers in an image using OpenCV. </p>
<p>This function detects the color of battery containers in an input image using OpenCV. The function first creates two arrays, <code>yellow_array</code> and <code>orange_array</code>, to store the center of each color. The function then applies contour analysis on the yellow and orange contours detected in the image using <code>yellow_detection</code> and <code>orange_detection</code> functions. The contour with an area greater than a certain threshold value is considered a battery container, and its center is added to the corresponding array. The function then flattens the arrays and sends the data to robot nodes via a ROS topic using <code>Float32MultiArray</code> messages.</p>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

</div>
</div>
<a id="a41d2d06bb09b8e620cd49e14257db867"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41d2d06bb09b8e620cd49e14257db867">&#9670;&nbsp;</a></span>compare_two_image()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def computer_vision.compare_two_image </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compare two images using Canny edge detection and contour analysis. </p>
<p>This function compares two input images using Canny edge detection and contour analysis. The function takes two images, <code>image</code> and <code>image_1</code>, and applies Canny edge detection to each image. The absolute difference between the edge maps is computed and thresholded to create a binary mask. The function then performs contour analysis on the binary mask to extract contours. Contours with an area less than 20 are discarded. The function then compares each contour to a set of predefined coordinates, stored in the <code>coordinates</code> variable, and returns a list of tuples containing the x and y coordinates of the center of the contour, the radius of the contour, and an index corresponding to the predefined coordinates that the contour is closest to.</p>
<dl class="section return"><dt>Returns</dt><dd>A list of tuples containing the x and y coordinates of the center of the contour, the radius of the contour, and an index corresponding to the predefined coordinates that the contour is closest to. </dd></dl>

</div>
</div>
<a id="ac9d29d203d323e912819ad03f59cd026"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9d29d203d323e912819ad03f59cd026">&#9670;&nbsp;</a></span>crop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def computer_vision.crop </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>img</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>factor</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Crop an image to a rectangle in the center of the image. </p>
<p>This function crops an input image to a rectangle in the center of the image. The size of the rectangle is determined by the <code>factor</code> input, which should be a positive integer. The function returns the cropped image as a new image with the same dimensions as the original image.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">img</td><td>The input image to be cropped </td></tr>
    <tr><td class="paramname">factor</td><td>The factor used to calculate the size of the rectangle to crop </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a00931f67cb5bcd1dfb49a1cfeb1dddfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00931f67cb5bcd1dfb49a1cfeb1dddfb">&#9670;&nbsp;</a></span>depth_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def computer_vision.depth_callback </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function for processing depth image messages. </p>
<p>This function is called every time an image message is received. The function converts the ROS image message to an OpenCV image, and sets the global image variable to the converted image. The function also sets the flag to 1 when the first message is received, indicating that the image has been initialized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>The depth image message </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
